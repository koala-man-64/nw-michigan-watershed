{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rdpro\\\\Projects\\\\NW Michigan Watershed Coalition\\\\dashboard\\\\src\\\\MapPanel.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport Papa from 'papaparse';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix default icon issue in Leaflet with Webpack\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n});\n\n// Component to set initial bounds when map is created\nfunction SetMapBounds({\n  bounds\n}) {\n  _s();\n  const map = useMap();\n  useEffect(() => {\n    if (bounds.isValid()) {\n      map.fitBounds(bounds, {\n        padding: [20, 20]\n      });\n    }\n    // Run only once at mount time\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map, bounds]);\n  return null;\n}\n_s(SetMapBounds, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c = SetMapBounds;\nfunction MapPanel({\n  selectedSites\n}) {\n  _s2();\n  const [allLocations, setAllLocations] = useState([]);\n\n  // Load all locations from locations.csv on mount\n  useEffect(() => {\n    fetch('/locations.csv').then(response => response.text()).then(csvText => {\n      Papa.parse(csvText, {\n        header: true,\n        skipEmptyLines: true,\n        complete: result => {\n          // Assume CSV has columns: id, name, latitude, longitude (adjust field names if needed)\n          const locations = result.data.map(row => ({\n            name: row.name || row.Location,\n            lat: parseFloat(row.latitude) || parseFloat(row.Latitude),\n            lng: parseFloat(row.longitude) || parseFloat(row.Longitude)\n          })).filter(loc => !isNaN(loc.lat) && !isNaN(loc.lng));\n          setAllLocations(locations);\n        }\n      });\n    });\n  }, []);\n\n  // Calculate bounds to cover all locations\n  const bounds = L.latLngBounds(allLocations.map(loc => [loc.lat, loc.lng]));\n\n  // Filter locations that are selected (based on name)\n  const selectedLocations = allLocations.filter(loc => selectedSites.includes(loc.name));\n  return /*#__PURE__*/_jsxDEV(MapContainer, {\n    style: {\n      height: '100%',\n      width: '100%'\n    },\n    scrollWheelZoom: true,\n    children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n      attribution: \"\\xA9 OpenStreetMap contributors\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), allLocations.length > 0 && /*#__PURE__*/_jsxDEV(SetMapBounds, {\n      bounds: bounds\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 35\n    }, this), selectedLocations.map((loc, index) => /*#__PURE__*/_jsxDEV(Marker, {\n      position: [loc.lat, loc.lng],\n      children: /*#__PURE__*/_jsxDEV(Popup, {\n        children: loc.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s2(MapPanel, \"A3MHoSI3qLTCds3Vbt2aE42N2y8=\");\n_c2 = MapPanel;\nexport default MapPanel;\nvar _c, _c2;\n$RefreshReg$(_c, \"SetMapBounds\");\n$RefreshReg$(_c2, \"MapPanel\");","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","Marker","Popup","useMap","L","Papa","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","SetMapBounds","bounds","_s","map","isValid","fitBounds","padding","_c","MapPanel","selectedSites","_s2","allLocations","setAllLocations","fetch","then","response","text","csvText","parse","header","skipEmptyLines","complete","result","locations","data","row","name","Location","lat","parseFloat","latitude","Latitude","lng","longitude","Longitude","filter","loc","isNaN","latLngBounds","selectedLocations","includes","style","height","width","scrollWheelZoom","children","url","attribution","fileName","_jsxFileName","lineNumber","columnNumber","length","index","position","_c2","$RefreshReg$"],"sources":["C:/Users/rdpro/Projects/NW Michigan Watershed Coalition/dashboard/src/MapPanel.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport Papa from 'papaparse';\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\n// Fix default icon issue in Leaflet with Webpack\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\r\n});\r\n\r\n// Component to set initial bounds when map is created\r\nfunction SetMapBounds({ bounds }) {\r\n  const map = useMap();\r\n  useEffect(() => {\r\n    if (bounds.isValid()) {\r\n      map.fitBounds(bounds, { padding: [20, 20] });\r\n    }\r\n    // Run only once at mount time\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [map, bounds]);\r\n  return null;\r\n}\r\n\r\nfunction MapPanel({ selectedSites }) {\r\n  const [allLocations, setAllLocations] = useState([]);\r\n\r\n  // Load all locations from locations.csv on mount\r\n  useEffect(() => {\r\n    fetch('/locations.csv')\r\n      .then(response => response.text())\r\n      .then(csvText => {\r\n        Papa.parse(csvText, {\r\n          header: true,\r\n          skipEmptyLines: true,\r\n          complete: (result) => {\r\n            // Assume CSV has columns: id, name, latitude, longitude (adjust field names if needed)\r\n            const locations = result.data.map(row => ({\r\n              name: row.name || row.Location, \r\n              lat: parseFloat(row.latitude) || parseFloat(row.Latitude),\r\n              lng: parseFloat(row.longitude) || parseFloat(row.Longitude)\r\n            })).filter(loc => !isNaN(loc.lat) && !isNaN(loc.lng));\r\n            setAllLocations(locations);\r\n          }\r\n        });\r\n      });\r\n  }, []);\r\n\r\n  // Calculate bounds to cover all locations\r\n  const bounds = L.latLngBounds(allLocations.map(loc => [loc.lat, loc.lng]));\r\n\r\n  // Filter locations that are selected (based on name)\r\n  const selectedLocations = allLocations.filter(loc => selectedSites.includes(loc.name));\r\n\r\n  return (\r\n    <MapContainer style={{ height: '100%', width: '100%' }} scrollWheelZoom={true}>\r\n      <TileLayer\r\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        attribution=\"&copy; OpenStreetMap contributors\"\r\n      />\r\n      {allLocations.length > 0 && <SetMapBounds bounds={bounds} />}\r\n      {selectedLocations.map((loc, index) => (\r\n        <Marker key={index} position={[loc.lat, loc.lng]}>\r\n          <Popup>{loc.name}</Popup>\r\n        </Marker>\r\n      ))}\r\n    </MapContainer>\r\n  );\r\n}\r\n\r\nexport default MapPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}