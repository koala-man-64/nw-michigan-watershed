/* ========================================= */
/* ============ Global Styles ============== */
/* ========================================= */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Poppins:wght@300;400;600&display=swap');

html, body, #root { height: 100%; }

body {
  margin: 0;
  font-family: "Inter", sans-serif;
  font-size: 14px;
  background-color: #e3e6ea;
  color: #333;
}

/* ========================================= */
/* ============ Layout & Containers ======== */
/* ========================================= */

/* Left column: stack filters over the map, and have this container fill its grid cell */
.filter-map-panel {
  display: flex;
  flex-direction: column;
  gap: 8px;
  width: min(100%, var(--panel-max-width));
  min-height: 0;
  height: 100%;                   /* <— key: makes the panel fill the grid cell height */
}

/* ====================Header===================== */
/* Updated header styling with merged title and menu on one line */
/* --- Header wrapper --- */
.header {
  background-color: #37474F;
  color: #fff;
  /* width: 100%; */
  min-width: 200px;
  /* keep height only as needed for content */
  line-height: 1.2;
  /* subtle depth so it doesn't feel flat */
  box-shadow: 0 1px 3px rgba(0,0,0,.2);
}

/* center content and give breathing room */
.header-container {
  /* display: flex;
  align-items: center; */
  justify-content: left;
  /* width: 100%; */
  gap: 16px;
  padding: 8px 16px;            /* more horizontal padding, minimal vertical */
  /* max-width: 1200px;            optional container width */
  margin: 0 auto;               /* center the header contents */
}

/* left side: logo + title */
.header-left {
  display: flex;
  align-items: center;
  gap: 12px;                    /* consistent space between logo and text */
  min-width: 0;                 /* allow text to ellipsize instead of pushing */
}

/* make the logo scale nicely without distortion */
.header-logo {
  display: block;               /* removes inline-img baseline gap */
  height: 40px;                 /* tune this to taste */
  width: auto;                  /* keep aspect ratio */
  max-width: 180px;             /* prevent huge images from exploding the layout */
  object-fit: contain;
}

/* title text with responsive sizing and truncation */
.title {
  font-weight: 700;
  letter-spacing: 0.3px;
  /* responsive font: 18px on small screens up to 28px on large */
  font-size: clamp(18px, 2.2vw, 28px);
  white-space: nowrap;          /* keep on one line */
  overflow: hidden;
  text-overflow: ellipsis;
  text-align: left;
}

/* optional slim divider between title and nav */
.vertical-separator {
  width: 1px;
  height: 1.4em;
  background: rgba(255,255,255,0.25);
  margin: 0 10px;
}

/* small screens: let the title wrap if needed */
@media (max-width: 520px) {
  .title {
    white-space: normal;
  }
}
/* ========================================= */

/* Vertical separator between title and menu */
.vertical-separator {
  width: 1px;
  height: 24px;
  background-color: white;
  margin: 0 10px;
}

/* Menu styling with slightly smaller and thinner text */
.menu {
  display: flex;
  gap: 15px;
  align-items: center;
}

.menu a {
  font-size: 16px;
  font-weight: 400;
  color: white;
  text-decoration: none;
}

.menu a:hover {
  text-decoration: underline;
}



/* ========================================= */
/* ============ Filter Panel =============== */
/* ========================================= */

/*
 * Filters toolbar
 *
 * Defines the layout and appearance of the collection of filter
 * controls at the top of the map panel.  The toolbar wraps when
 * necessary, scrolls horizontally on overflow and applies a light
 * background and shadow for visual separation.
 */
.filters {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  gap: 16px;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  background: #F8FAFC;
  padding: 5px;
  box-sizing: border-box;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  flex: 0 0 auto;
}

.filters > * {
  flex: 0 0 auto;
  white-space: nowrap;
}


.filter-dropdown {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.filter-dropdown label {
  flex: 1;
  font-size: 14px;
  font-weight: 600;
}

.year-select {
  width: 100%;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 5px;
  background: white;
  cursor: pointer;
  font-size: 14px;
}


.filter-group {
  display: flex;
  flex-direction: column;
  flex: 0 0 auto;  
}

.site-group {
  width: 320px;
  max-width: 100%;
}

.filter-separator {
  border: none;
  border-top: 1px solid #ccc;
  margin: 10px 0;
}

/* Site Filter */
.search-box {
  width: 100%;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 5px;
  box-sizing: border-box;
}

.site-list {
  max-height: 200px;
  overflow-y: auto;
  border: 1px solid #ccc;
  border-radius: 5px;
  padding: 5px;
  background: #fff;
}

.site-item {
  padding: 8px;
  cursor: pointer;
  border-bottom: 1px solid #eee;
}

.site-item:last-child {
  border-bottom: none;
}

.site-item:hover {
  background: #e0e6ed;
}

.site-item.selected {
  background: #37474F;
  color: white;
  font-weight: bold;
}

/* Parameter Filter */
.parameter-filter {
  display: flex;
  flex-direction: column;
  gap: 5px;
}

/* Adds spacing between parameter options */
.parameter-options {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  margin-top: 5px;
}

.parameter-option {
  display: flex;
  align-items: center;
}

.parameter-option input {
  margin-right: 5px;
}

/* ========================================= */
/* ============ Buttons ==================== */
/* ========================================= */

.filter-buttons {
  display: flex;
  justify-content: center;
  margin-top: 15px;
  width: 
}

.reset-btn {
  padding: 10px 16px;
  border: none;
  border-radius: 5px;
  font-size: 14px;
  cursor: pointer;
  background-color: #d9534f;
  color: white;
  width: 100%;
  text-align: center;
}

.reset-btn:hover {
  background-color: #c9302c;
}

.menu-link,
.menu-button {
  font-size: 16px;
  font-weight: 400;
  color: white;
  text-decoration: none;
  background: none;
  border: none;
  cursor: pointer;
}


/* ========================================= */
/* ============ Map and Plot Panels ======== */
/* ========================================= */

.map,
.plots {
  background: #F8FAFC;
  padding: 8px;            /* unified padding (was conflicting) */
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);

  display: flex;
  flex-direction: column;

  flex: 1 1 auto;           /* key: take leftover height */
  min-height: 0;            /* allow inner content to shrink */
  overflow: hidden;
}

/* ========================================= */
/* ============ Plots Styling ============== */
/* ========================================= */

.plots-container {
  display: flex;
  flex-direction: column;
  gap: 15px;
  height: 100%;   /* Fills the entire plots panel */
}

.plot-panel {
  flex: 1;        /* Evenly split available vertical space */
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: white;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* Ensure the header (h4) doesn't shrink and takes minimal space */
.plot-panel h4 {
  margin-bottom: 10px;
  flex-shrink: 0;
}

.plot-content {
  flex: 1;        /* Chart fills the rest of the panel */
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

/* Force the chart's canvas to always fill the container */
.plot-content canvas {
  width: 100% !important;
  height: 100% !important;
}

/* ========================================= */
/* ============ Responsive Design ========== */
/* ========================================= */

.map > * {
  flex: 1 1 auto;
  min-height: 0;
}
.map .leaflet-container {
  height: 100%;
  width: 100%;
}

/* ========================================= */
/* ============ Login Page ================= */
/* ========================================= */

.login-container {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 80vh;
}

.login-container input {
  width: 280px;
  padding: 12px;
  margin-bottom: 12px;
  border: 1px solid #ccc;
  border-radius: 8px;
  font-size: 16px;
  background-color: #fff;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.login-container button {
  width: 280px;
  padding: 12px;
  background-color: #37474F;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.login-container button:hover {
  background-color: #263238;
}

.error {
  color: #D32F2F;
  margin-top: 10px;
  font-weight: 500;
}


/* Searchable Multi-Select */
.sms-root { display: flex; flex-direction: column; width: 100%; max-width: 360px; }
.sms-label { font-size: 14px; font-weight: 600; color: #334155; }

.sms-toggle {
  display: flex; justify-content: space-between; align-items: center;
  padding: 10px 12px; border-radius: 8px; border: 1px solid #cbd5e1; background: #fff;
  cursor: pointer; text-align: left;
}
.sms-toggle.open { border-color: #94a3b8; box-shadow: 0 2px 8px rgba(0,0,0,.06); }
.sms-summary { color: #64748b; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.sms-summary.has-value { color: #0f172a; }
.sms-caret { margin-left: 8px; }

.sms-panel {
  margin-top: 6px; border: 1px solid #cbd5e1; border-radius: 10px; background: #fff;
  box-shadow: 0 8px 20px rgba(2,6,23,0.12); overflow: hidden; display: flex; flex-direction: column;
}
.sms-controls { padding: 8px; border-bottom: 1px solid #e2e8f0; display: flex; gap: 8px; align-items: center; }
.sms-search {
  flex: 1; padding: 8px 10px; border-radius: 8px; border: 1px solid #cbd5e1; outline: none;
}
.sms-actions { display: flex; gap: 6px; }
.sms-action { border: none; background: #f1f5f9; padding: 6px 10px; border-radius: 6px; cursor: pointer; }
.sms-action:hover { background: #e2e8f0; }

.sms-list { overflow: auto; max-height: 240px; padding: 6px; display: grid; gap: 4px; }
.sms-empty { padding: 12px; color: #64748b; text-align: center; }

.sms-option {
  display: flex; align-items: center; gap: 8px; padding: 8px 10px; border-radius: 8px; cursor: pointer;
}
.sms-option.hover { background: #f8fafc; }
.sms-option.active { background: #eef2ff; }
.sms-option input { pointer-events: none; }
.sms-option-label { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

/* existing .sms-panel styles are fine; add an overlay variant */
.sms-panel-overlay {
  /* position, top, left, width, z-index set inline */
  margin-top: 0;             /* don't add layout gaps */
  border: 1px solid #cbd5e1;
  border-radius: 10px;
  background: #fff;
  box-shadow: 0 12px 28px rgba(2,6,23,0.18), 0 2px 8px rgba(2,6,23,0.08);
  overflow: hidden;
}

/* optional: stop parents (like .filters) from creating a clipping context */
.filters, .container {
  overflow: visible; /* ensure overlay isn't clipped by ancestors */
}

.app {
  display: grid;
  grid-template-rows: auto 1fr;
  min-height: 100vh;
}

.main {
  display: grid;
  grid-template-columns: max-content 1fr;
  align-items: stretch;            /* stretch items to the row height */
  gap: 8px;
  padding: 12px;
  min-height: 0;                   /* important to allow children to size */
}

/* Let the second row actually be allowed to shrink/grow */
/* .left, .right { min-width: 0; min-height: flex; } */
.left {
  /* max-width: 1075px;   
  width: 100%; */
  justify-self: start;
}

/* 4) Right should take all available HEIGHT */
.right {
  align-self: stretch;             /* (default in grid, but explicit) */
  min-height: 0;
  display: flex;                   /* so its child can grow vertically */
  flex-direction: column;
}


.map .leaflet-container {
  height: 100%;
  width: 100%;
}

/* If your map tries to take the whole viewport, constrain it */
/* Removed .map-container; see .left .map definition above for height control */

/* Responsive: stack on narrow screens */
@media (max-width: 900px) {
  .main { grid-template-columns: 1fr; }
  .right { order: 2; }   /* plot below left column when stacked */
}

.sms-toggle.open {
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
  box-shadow: none;
  border-bottom-color: transparent;
  pointer-events: none;    /* clicks go to the overlay */
  visibility: hidden;
}
.sms-panel-overlay {
  border-top-left-radius: 0;
  border-top-right-radius: 0;
}
.sms-panel,
.sms-panel-overlay {
  margin-top: 0 !important;
}

/* one place to control radius */
.sms-root { --sms-radius: 12px; }

.sms-panel-overlay {
  border-radius: var(--sms-radius) !important;   /* round all corners */
  border: 1px solid #cbd5e1;
  overflow: hidden;                               /* show the rounding cleanly */
}

/* if you previously added a 'merged' look, undo any 0-radius on top */
.sms-panel-overlay {
  border-top-left-radius: var(--sms-radius) !important;
  border-top-right-radius: var(--sms-radius) !important;
}

.sms-controls {
  display: flex;
  align-items: center;
  /* gap: 8px; */
  padding: 8px;
  border-bottom: 1px solid #e2e8f0;
}

.sms-search {
  flex: 1 1 auto;     /* grow and shrink */
  min-width: 0;       /* critical: allow shrinking inside flex */
}

.sms-actions {
  display: flex;
  gap: 6px;
  flex: 0 0 auto;     /* don’t stretch */
}

.sms-action {
  padding: 6px 8px;
  font-size: 12px;
  line-height: 1;
  white-space: nowrap;  /* prevent wrap */
}

/* The map card itself should consume all remaining space under the toolbar */
.map {
 /*  flex: 1 1 auto;                 <— key: makes the map area stretch */
  min-height: 0;                  /* avoids flex overflow issues */
}

/* Leaflet map fills its parent .map area */
.map .leaflet-container {
  height: 100%;
  /* width: 100%; */
}